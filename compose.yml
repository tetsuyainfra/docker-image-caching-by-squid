#
# Do not edit this file directly. It is generated by Makefile.
#
services:
  squid:
    environment:
      CACHE_DIR: ${CACHE_DIR:-ufs /var/cache/squid 10000 16 256}
      CACHE_MEM: ${CACHE_MEM:-256 MB}
      CONTAINER_DEBUG: ${CONTAINER_DEBUG}
      DEBUG: ${DEBUG}
      MAXIMUM_OBJECT_SIZE: ${MAXIMUM_OBJECT_SIZE:-512 MB}
      SQUID_HTTPS_USERS: ${SQUID_HTTPS_USERS}
      TZ: ${TZ:-UTC}
    healthcheck:
      disable: true
      interval: 10s
      retries: 3
      test:
        - CMD-SHELL
        - squidclient
        - -h
        - localhost
        - -p
        - "3128"
        - mgr:info
      timeout: 10s
    image: ${SQUID_IMAGE:-tetsuyainfra/compose-squid:latest}
    ports:
      - mode: ingress
        protocol: tcp
        published: "3128"
        target: 3128
      - mode: ingress
        protocol: tcp
        published: "3142"
        target: 3142
    restart: ${RESTART:-unless-stopped}
    volumes:
      - source: squid_spool
        target: /var/spool/squid
        type: volume
        volume: {}
      - source: squid_cache
        target: /var/cache/squid
        type: volume
        volume: {}
volumes:
  registry_data: null
  squid_cache: null
  squid_spool: null
